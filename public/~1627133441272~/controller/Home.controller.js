sap.ui.define(["./util/BaseController"],function(t){"use strict";return t.extend("com.perezjquim.ytc.pwa.controller.Home",{API_BASE_URL:"https://perezjquim-ytc.herokuapp.com",onPressDownload:function(){this.setBusy(true);const t=this.getModel("prompt");const e=t.getData();const o=new URLSearchParams(e);const n=decodeURIComponent(o.toString());const s=(new Date).getTime();const i=`${this.API_BASE_URL}/crop-video?${n}&=${s}`;fetch(i).then(t=>{if(t.ok){const e=t.headers.get("content-disposition").split("filename=")[1].split(";")[0];t.blob().then(t=>{const o=new Blob([t],{type:"application/octet-stream"});if(window.navigator.msSaveBlob){window.navigator.msSaveBlob(o,e)}else{const t=window.URL.createObjectURL(o);const n=document.createElement("a");n.setAttribute("href",t);n.setAttribute("download",e);n.click()}})}else{throw new Error}}).catch(t=>{this.setBusy(false);this.toast(`Error! - ${t}`)})}})});